<!DOCTYPE html>
<html>
<head>
    <title>Fix Extension Settings</title>
</head>
<body>
    <h1>Fix Extension Settings</h1>
    <p>This page will fix the AI settings for your extension.</p>
    <button id="fixSettings">Fix AI Settings</button>
    <div id="status"></div>
    
    <script>
        document.getElementById('fixSettings').addEventListener('click', function() {
            // Set the correct settings
            chrome.storage.sync.set({
                preferAI: true,
                ollamaModel: 'llama3.2',
                summaryLength: 'medium'
            }, function() {
                document.getElementById('status').innerHTML = '<p style="color: green;">Settings fixed! AI summarization is now enabled.</p>';
                console.log('Settings updated successfully');
                
                // Verify the settings
                chrome.storage.sync.get(['preferAI', 'ollamaModel'], function(result) {
                    console.log('Current settings:', result);
                });
            });
        });
        
        // Check current settings
        chrome.storage.sync.get(['preferAI', 'ollamaModel'], function(result) {
            console.log('Current settings before fix:', result);
            document.getElementById('status').innerHTML = '<p>Current preferAI: ' + result.preferAI + ', Model: ' + result.ollamaModel + '</p>';
        });
    </script>
</body>
</html>
